/*
 * File:        jquery-tooltipify.js
 * Version:     0.2
 * Author:      Vincent Keizer (www.vicreative.nl)
 * Info:        www.vicreative.nl/projects/Tooltipify
 *
 * Copyright 2012-2013 Vincent Keizer, all rights reserved.
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function(n){var t={createTooltip:function(t){var i=n("<div />",{"class":"tooltipify hide",css:{position:"absolute",opacity:"0"}}).append(n("<span />",{text:t.title,"class":"text"})).append(n("<span />",{"class":"icon"}));return t.settings.width&&i.css("width",t.settings.width+"px"),i},setPosition:function(n,i,r){var u=r.displayAware?t.getTooltipPosition(n,i,r):r.position;return r.position&&n.removeClass(r.position),n.css({top:t.getYPosition(u,r,i,n),left:t.getXPosition(u,r,i,n)}).addClass(u),r.tooltip=n,n},getTooltipHeight:function(n){return n.children(".text").outerHeight()+n.children(".icon").outerHeight()},getTooltipWidth:function(n){var t=n.find(".icon");return n.outerWidth()+(t.hasClass("left")||t.hasClass("right")?t.outerWidth():0)},getTooltipPosition:function(i,r,u){var f=u.position,s=n(window).height(),h=n(window).width(),c=t.getTooltipWidth(i),l=t.getTooltipHeight(i),a=r.position(),e=a.left,o=a.top;switch(f){case"left":e<c&&h-e>e&&(f="right");break;case"right":h-e>c&&e>h-e&&(f="left");break;case"bottom":s-o>l&&o>s-o&&(f="top");break;default:o<l&&s-o>o&&(f="bottom")}return f},getYPosition:function(n,i,r,u){var f=r.position();switch(n){case"left":return f.top+r.outerHeight()/2+i.offsetTop-t.getTooltipHeight(u)/2;case"right":return f.top+r.outerHeight()/2+i.offsetTop-t.getTooltipHeight(u)/2;case"bottom":return f.top+(t.getTooltipHeight(u)+i.offsetTop);default:return f.top-(t.getTooltipHeight(u)+i.offsetTop)}},getXPosition:function(n,i,r,u){var f=r.position();switch(n){case"left":return f.left+i.offsetLeft-t.getTooltipWidth(u);case"right":return f.left+r.outerWidth()+u.find(".icon").outerWidth()+i.offsetLeft;case"bottom":return f.left+i.offsetLeft;default:return f.left+i.offsetLeft}}},i={show:function(){var f=n(this),e=f.data("tooltipify"),u=e.tooltip,r,o,s;u&&u.length||(u=t.createTooltip(e),f.before(u),e.tooltip=u.show(),r=e.settings,t.setPosition(u,f,r),o={opacity:r.opacity},r.animationProperty&&(s=parseInt(u.css(r.animationProperty).replace(/[^-\d\.]/g,"")),u.css(r.animationProperty,s-r.animationOffset),o[r.animationProperty]="+="+r.animationOffset),u.removeClass("hide").animate(o,r.animationDuration,function(){n(this).addClass("show")}),n(window).bind("resize",{element:f},i.reInit))},hide:function(){var f=n(this),e=f.data("tooltipify"),r=e.tooltip,t,u;r&&r.length&&r.is(":visible")&&(t=e.settings,u={opacity:0},t.animationProperty&&(u[t.animationProperty]="-="+t.animationOffset),r.removeClass("show").animate(u,t.animationDuration,function(){n(this).remove(),f.data("tooltipify").tooltip=null}),n(window).unbind("resize",i.reInit))},reInit:function(n){var r=n.data.element,i;r&&(i=n.data.element.data("tooltipify"),i&&t.setPosition(i.tooltip,r,i.settings))}},r={init:function(t){var r=n.extend({position:"top",offsetLeft:0,offsetTop:0,opacity:.8,width:null,animationProperty:"left",animationOffset:50,animationDuration:100,showEvent:"mouseover",hideEvent:"mouseout",displayAware:!0},t);return n(this).each(function(){var t=n(this),u=t.data("tooltipify");u||(t.bind(r.showEvent,i.show).bind(r.hideEvent,i.hide).data("tooltipify",{title:t.attr("title"),tabindex:t.attr("tabindex"),settings:r}).attr("title",""),t.attr("tabindex")||t.attr("tabindex","0"))})},destroy:function(){return this.each(function(){var r=n(this),t=r.data("tooltipify");t&&(n(window).unbind(".tooltipify"),r.unbind(t.settings.showEvent,i.show).unbind(t.settings.hideEvent,i.hide).attr("title",t.title).attr("tabindex",t.tabindex),t.tooltip.remove(),r.removeData("tooltipify"))})},show:function(){return this.each(function(){var t=n(this).data("tooltipify");t&&n(this).trigger(t.settings.showEvent)})},hide:function(){return this.each(function(){var t=n(this).data("tooltipify");t&&n(this).trigger(t.settings.hideEvent)})}};n.fn.tooltipify=function(t){var i=t;if(r[i])return r[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery tooltipify");else return r.init.apply(this,arguments)}})(jQuery);